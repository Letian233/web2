<!DOCTYPE html>
<html lang="en" data-menu-items='{{ menu_items|tojson|safe }}' data-current-user='{{ current_user|tojson|safe }}'>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Menu</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/bootstrap.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/hamberger.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/pages.css') }}">
    <script src="{{ url_for('static', filename='js/jQuery_v3.7.1.js') }}"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{{ url_for('static', filename='js/pages.js') }}"></script>
    <script src="{{ url_for('static', filename='js/hamberger.js') }}"></script>
    <script src="{{ url_for('static', filename='js/data.js') }}"></script>
    <script src="{{ url_for('static', filename='js/cart.js') }}"></script>
    <script src="{{ url_for('static', filename='js/menu.js') }}"></script>
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
</head>
<body class="menu-page">
    <!-- 用户菜单 - 固定在右上角 -->
    <div id="userMenuContainer" class="user-menu-fixed"></div>
    <!-- 购物车按钮 - 固定在右上角，头像下方（仅登录用户显示） -->
    {% if current_user %}
    <div id="cartButtonContainer" class="cart-button-fixed">
      <button class="cart-fixed-btn" id="viewCartBtnFixed" title="View Cart" aria-label="View Cart">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="9" cy="21" r="1"></circle>
          <circle cx="20" cy="21" r="1"></circle>
          <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
        </svg>
        <span class="cart-badge-fixed" id="cartBadgeFixed" style="display: none;">0</span>
      </button>
    </div>
    {% endif %}
    <div id="container">
        <header>
          <nav class="navbar navbar-expand-lg navbar-dark">
            <div class="container-fluid">
              <button class="navbar-toggler hamburger" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span></span>
                <span></span>
                <span></span>
              </button>
              <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto" id="nav">
                  <li class="nav-item"><a class="nav-link" href="{{ url_for('index') }}">Home</a></li>
                  <li class="nav-item"><a class="nav-link" href="{{ url_for('about') }}">About</a></li>
                  <li class="nav-item"><a class="nav-link current" href="{{ url_for('menu') }}">Menu</a></li>
                  <li class="nav-item"><a class="nav-link" href="{{ url_for('reviews') }}">Review</a></li>
                </ul>
              </div>
            </div>
          </nav>
        </header>
    
    <div class="wrapper">
      <div class="container">
        <div class="border"></div>
        <div id="orderHistory"></div>
        
        <div class="row mt-4">
          <!-- 左侧菜单区域 -->
          <div class="col-12 col-lg-8">
            <article class="menu">
              
             
              
              <!-- 搜索和過濾區域 -->
              <div class="menu-filter-bar mb-4">
                <!-- 頂部：搜索框 + 漢堡按鈕 -->
                <div class="filter-header">
                <div class="search-input-wrapper">
                  <input 
                    type="text" 
                    id="searchInput" 
                    class="search-input" 
                      placeholder="Search dishes..."
                    aria-label="Search menu items"
                  >
                  <button type="button" id="searchBtn" class="search-button" aria-label="Search">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#f5f5f5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                      <circle cx="11" cy="11" r="8"></circle>
                      <path d="m21 21-4.35-4.35"></path>
                    </svg>
                  </button>
                  </div>
                  
                  <!-- 漢堡過濾按鈕 -->
                  <button type="button" id="filterToggleBtn" class="filter-toggle-btn" aria-label="Toggle filters" aria-expanded="false">
                    <div class="filter-hamburger">
                      <span></span>
                      <span></span>
                      <span></span>
                    </div>
                    <span class="filter-toggle-text">Filters</span>
                  </button>
                </div>
                
                <!-- 可折疊的過濾面板 -->
                <div id="filterPanel" class="filter-panel collapsed">
                  <div class="filter-panel-content">
                    <!-- 過濾和排序控件 -->
                    <div class="filter-row filter-controls">
                      <!-- 類別過濾 -->
                      <div class="filter-group">
                        <label for="categoryFilter">Category:</label>
                        <select id="categoryFilter" class="filter-select">
                          <option value="">All Categories</option>
                          <!-- 選項將由 JS 動態填充 -->
                        </select>
                      </div>
                      
                      <!-- 價格範圍 -->
                      <div class="filter-group price-range-group">
                        <label>Price:</label>
                        <div class="price-inputs">
                          <input type="number" id="minPrice" class="price-input" placeholder="Min" min="0" step="0.01">
                          <span class="price-separator">-</span>
                          <input type="number" id="maxPrice" class="price-input" placeholder="Max" min="0" step="0.01">
                        </div>
                      </div>
                      
                      <!-- 排序 -->
                      <div class="filter-group">
                        <label for="sortBy">Sort by:</label>
                        <select id="sortBy" class="filter-select">
                          <option value="price-asc">Price: Low to High</option>
                          <option value="price-desc">Price: High to Low</option>
                          <option value="rating-desc">Rating: High to Low</option>
                          <option value="rating-asc">Rating: Low to High</option>
                        </select>
                      </div>
                      
                      <!-- 應用/重置按鈕 -->
                      <div class="filter-buttons">
                        <button type="button" id="applyFiltersBtn" class="button filter-btn">Apply</button>
                        <button type="button" id="resetFiltersBtn" class="button filter-btn filter-btn-reset">Reset</button>
                      </div>
                    </div>
                  </div>
                </div>
                
                <!-- 當前過濾狀態顯示 -->
                <div id="filterStatus" class="filter-status" style="display: none;">
                  <span id="filterStatusText"></span>
                  <button type="button" id="clearFiltersBtn" class="clear-filters-btn">Clear all</button>
                </div>
              </div>
              
              <!-- 菜品容器 -->
              <div id="menu-container">
                <!-- 菜单项将在这里动态生成 -->
              </div>
              
              <!-- 分页控件 -->
              <div class="menu-pagination mt-4">
                <button id="prevBtn" class="pagination-btn">Previous</button>
                <span id="pageInfo" class="pagination-info">Page 1 of 3</span>
                <button id="nextBtn" class="pagination-btn">Next</button>
              </div>
            </article>
          </div>
          
          <!-- 右侧边栏 -->
          <div class="col-12 col-lg-4 mt-4 mt-lg-0">
            <aside class="sidebar">
              <div class="sidebar-header">
                <h3>Today's Specials</h3>
              </div>
              <ul class="blog">
                <li><a href="#">Seafood Pasta</a><br>
                  Fresh seafood with traditional pasta, served with a white wine cream sauce, $18</li>
                <li><a href="#">Mediterranean Salad</a><br>
                  A mix of green leaves, cherry tomatoes, olives, feta cheese, $12</li>
                <li><a href="#">Pan-Seared Salmon</a><br>
                  Premium Norwegian salmon with a side of lemon butter sauce and seasonal vegetables, $22</li>
                <li><a href="#">Mushroom Risotto</a><br>
                  A rich and creamy mushroom risotto infused with Parmesan cheese and fresh herbs, $16</li>
              </ul>
              <div class="border3"></div>
              <h3>Chef's Specialty</h3>
              <img src="{{ url_for('static', filename='images/beef_ribs.jpg') }}" class="img-fluid mb-3" alt="Beef Ribs">
              <p><strong>Slow-Roasted Beef Ribs</strong> Slow-roasted beef ribs are one of the signature dishes of our restaurant, embodying our passion for fine cuisine and commitment to culinary craftsmanship. This dish is renowned for its tender meat and unique flavor profile.<br>
                <a href="#"><strong>Continue Reading &raquo;</strong></a></p>
              
              <!-- Delivery Info Widget -->
              <div class="border3 mt-4"></div>
              <div class="sidebar-widget">
                <h4>Free Delivery</h4>
                <div class="sidebar-widget-delivery">
                  <p>
                    Free delivery for orders over $50 within 5km radius!
                  </p>
                  <p>
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#9c5959" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                      <circle cx="12" cy="12" r="10"></circle>
                      <polyline points="12 6 12 12 16 14"></polyline>
                    </svg>
                    <span>Avg. time: 30-45 mins</span>
                  </p>
                </div>
              </div>
            </aside>
          </div>
        </div>
        
        <div class="border2 mt-4"></div>
      </div>
    </div>
      
    <footer>
      <div class="container">
        <div class="border"></div>
        <div class="wid">
          <div class="row g-4">
            <div class="col-12 col-md-6 col-lg-4">
              <div class="footer-widget">
                <h4>About Us</h4>
                <p>EpicEats is a food ordering platform dedicated to elevating the dining experience to new heights. We believe that every meal is not just a simple combination of food, but an adventure for the taste buds and a cultural exchange. Our mission is to connect diners with culinary creators, making every food order a memorable gastronomic journey. We promise that through our service, you will not only enjoy delicious food but also experience the culture and stories behind it. Join EpicEats and let's embark on a legendary journey of gastronomy together. </p>
              </div>
            </div>
            <div class="col-12 col-md-6 col-lg-4">
              <div class="footer-widget">
                <h4>From The Blog</h4>
                <ul class="blog">
                  <li><a href="#">Culinary Explorations</a><br>
                    We delve into the stories behind various dishes, from traditional cuisines to modern culinary innovations, with each post being a profound tribute to food. </li>
                  <li><a href="#">Recipe Sharing</a><br>
                    Our team of chefs carefully selects and shares exclusive recipes, allowing you to recreate restaurant-quality dishes at home. </li>
                  <li><a href="#">Diner Experiences</a><br>
                    Share real experiences and reviews from diners, giving you firsthand information before you make a reservation. </li>
                  
                </ul>
              </div>
            </div>
            <div class="col-12 col-md-6 col-lg-4">
              <div class="footer-widget">
                <h4>We Are Social!</h4>
                <div id="social"> 
                  <!-- <a href="http//twitter.com/priteshgupta" class="s3d twitter" target="_blank"> Twitter <span class="icons twitter"></span> </a>  -->
                  <a href="https://m-face-book.com/" class="s3d facebook" target="_blank"> Facebook <span class="icons facebook"></span> </a> 
                  <a href="https://zurb.com/blog/zurb-acquires-forrst" class="s3d forrst" target="_blank"> Forrst <span class="icons forrst"></span> </a> 
                  <a href="https://blog.flickr.net/zh" class="s3d flickr" target="_blank"> Flickr <span class="icons flickr"></span> </a> 
                  <a href="https://designmodo.com/" class="s3d designmoo" target="_blank"> Designmoo <span class="icons designmoo"></span> </a> </div>
              </div>
            </div>
          </div>
        </div>
        <div class="border2"></div>
        <br>
        <div class="row">
          <div class="col-12 col-md-6">
            <span class="copyright"><span class="left"><br>
              &copy; Copyright 2024 - All Rights Reserved - <a href="https://github.com/missmeso?tab=repositories" target="_blank">Letian</a></span>
          </div>
          <div class="col-12 col-md-6 text-md-end">
            <span class="copyright"><span class="right"><br>
              Design by 1029573707@qq.com | <a href="https://mail.qq.com/?_sm_nck=1" target="_blank">Sent Email</a><br>
              <br>
              <br>
            </span></span>
          </div>
        </div>
      </div>
    </footer>
  </div>

  <!-- 购物车模态框 -->
  <div id="cartModal" class="cart-modal">
    <div class="cart-modal-overlay"></div>
    <div class="cart-modal-content">
      <div class="cart-modal-header">
        <h3>Shopping Cart</h3>
        <button class="cart-modal-close" id="cartModalClose">&times;</button>
      </div>
      <!-- 标签页导航 -->
      <div class="cart-modal-tabs">
        <button class="cart-tab-btn active" data-tab="current" id="tabCurrent">Current Order</button>
        <button class="cart-tab-btn" data-tab="history" id="tabHistory">Order History</button>
      </div>
      <div class="cart-modal-body">
        <!-- 当前订单区域 -->
        <div id="currentOrderTab" class="cart-tab-content active">
          <div id="cartItemsList" class="cart-items-list">
            <!-- 购物车商品列表将在这里动态生成 -->
          </div>
          <div class="cart-empty-message" id="cartEmptyMessage">
            <p>Your cart is empty.</p>
          </div>
        </div>
        <!-- 历史订单区域 -->
        <div id="orderHistoryTab" class="cart-tab-content">
          <div id="orderHistoryList" class="order-history-list">
            <!-- 历史订单列表将在这里动态生成 -->
          </div>
          <div class="order-history-empty" id="orderHistoryEmpty">
            <p>No order history yet.</p>
          </div>
        </div>
      </div>
      <div class="cart-modal-footer">
        <div class="cart-total">
          <strong>Total: $<span id="cartTotalPrice">0.00</span></strong>
        </div>
        <button class="button checkout-btn" id="checkoutBtn">Checkout</button>
      </div>
    </div>
  </div>
</body>
</html>
