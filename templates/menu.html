<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Menu</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/bootstrap.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/hamberger.css') }}">
    <script src="{{ url_for('static', filename='js/jQuery_v3.7.1.js') }}"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{{ url_for('static', filename='js/hamberger.js') }}"></script>
    <script src="{{ url_for('static', filename='js/jQuery_fadeIn.js') }}"></script>
    <script src="{{ url_for('static', filename='js/jQuery_ToTop.js') }}"></script>
    <!-- 从后端注入菜单数据（来自 MySQL menu_items 表） -->
    <script>
      window.MENU_ITEMS_FROM_DB = JSON.parse('{{ menu_items|tojson|safe }}');
    </script>
    <script src="{{ url_for('static', filename='js/data.js') }}"></script>
    <script src="{{ url_for('static', filename='js/cart.js') }}"></script>
    <script src="{{ url_for('static', filename='js/menu.js') }}"></script>
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
    <script>
      window.CURRENT_USER = JSON.parse('{{ current_user|tojson|safe }}');
    </script>
</head>
<body class="menu-page">
    <!-- 用户菜单 - 固定在右上角 -->
    <div id="userMenuContainer" class="user-menu-fixed"></div>
    <div id="container">
        <header>
          <nav class="navbar navbar-expand-lg navbar-dark">
            <div class="container-fluid">
              <button class="navbar-toggler hamburger" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span></span>
                <span></span>
                <span></span>
              </button>
              <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto" id="nav">
                  <li class="nav-item"><a class="nav-link" href="{{ url_for('index') }}">Home</a></li>
                  <li class="nav-item"><a class="nav-link" href="{{ url_for('about') }}">About</a></li>
                  <li class="nav-item"><a class="nav-link current" href="{{ url_for('menu') }}">Menu</a></li>
                  <li class="nav-item"><a class="nav-link" href="{{ url_for('reviews') }}">Review</a></li>
                </ul>
              </div>
            </div>
          </nav>
        </header>
    
    <div class="wrapper">
      <div class="container">
        <div class="border"></div>
        <div id="orderHistory"></div>
        
        <div class="row mt-4">
          <!-- 左侧菜单区域 -->
          <div class="col-12 col-lg-8">
            <article class="menu">
              <!-- 搜索栏 -->
              <div class="menu-search-bar mb-4">
                <div class="search-input-wrapper">
                  <input 
                    type="text" 
                    id="searchInput" 
                    class="search-input" 
                    placeholder="Search dishes, categories..."
                    aria-label="Search menu items"
                  >
                  <button type="button" id="searchBtn" class="search-button" aria-label="Search">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#f5f5f5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                      <circle cx="11" cy="11" r="8"></circle>
                      <path d="m21 21-4.35-4.35"></path>
                    </svg>
                  </button>
                </div>
              </div>
              
              <!-- 菜品容器 -->
              <div id="menu-container">
                <!-- 菜单项将在这里动态生成 -->
              </div>
              
              <!-- 分页控件 -->
              <div class="menu-pagination mt-4">
                <button id="prevBtn" class="pagination-btn">Previous</button>
                <span id="pageInfo" class="pagination-info">Page 1 of 3</span>
                <button id="nextBtn" class="pagination-btn">Next</button>
              </div>
            </article>
          </div>
          
          <!-- 右侧边栏 -->
          <div class="col-12 col-lg-4 mt-4 mt-lg-0">
            <aside class="sidebar">
              <div class="sidebar-header">
                <h3>Today's Specials</h3>
                <button class="button view-cart-btn" id="viewCartBtn">View Cart</button>
              </div>
              <ul class="blog">
                <li><a href="#">Seafood Pasta</a><br>
                  Fresh seafood with traditional pasta, served with a white wine cream sauce, $18</li>
                <li><a href="#">Mediterranean Salad</a><br>
                  A mix of green leaves, cherry tomatoes, olives, feta cheese, $12</li>
                <li><a href="#">Pan-Seared Salmon</a><br>
                  Premium Norwegian salmon with a side of lemon butter sauce and seasonal vegetables, $22</li>
                <li><a href="#">Mushroom Risotto</a><br>
                  A rich and creamy mushroom risotto infused with Parmesan cheese and fresh herbs, $16</li>
              </ul>
              <div class="border3"></div>
              <h3>Chef's Specialty</h3>
              <img src="{{ url_for('static', filename='images/beef_ribs.jpg') }}" class="img-fluid mb-3" alt="Beef Ribs">
              <p><strong>Slow-Roasted Beef Ribs</strong> Slow-roasted beef ribs are one of the signature dishes of our restaurant, embodying our passion for fine cuisine and commitment to culinary craftsmanship. This dish is renowned for its tender meat and unique flavor profile.<br>
                <a href="#"><strong>Continue Reading &raquo;</strong></a></p>
              
              <!-- Delivery Info Widget -->
              <div class="border3 mt-4"></div>
              <div class="sidebar-widget">
                <h4>Free Delivery</h4>
                <div style="margin-top: 15px; color: #693434;">
                  <p style="margin-bottom: 15px; line-height: 1.6;">
                    Free delivery for orders over $50 within 5km radius!
                  </p>
                  <p style="margin-bottom: 0; color: #9c5959; font-weight: bold; display: flex; align-items: center; gap: 8px;">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#9c5959" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="flex-shrink: 0;">
                      <circle cx="12" cy="12" r="10"></circle>
                      <polyline points="12 6 12 12 16 14"></polyline>
                    </svg>
                    <span>Avg. time: 30-45 mins</span>
                  </p>
                </div>
              </div>
            </aside>
          </div>
        </div>
        
        <div class="border2 mt-4"></div>
      </div>
    </div>
      
    <footer>
      <div class="container">
        <div class="border"></div>
        <div class="wid">
          <div class="row g-4">
            <div class="col-12 col-md-6 col-lg-4">
              <div class="footer-widget">
                <h4>About Us</h4>
                <p>EpicEats is a food ordering platform dedicated to elevating the dining experience to new heights. We believe that every meal is not just a simple combination of food, but an adventure for the taste buds and a cultural exchange. Our mission is to connect diners with culinary creators, making every food order a memorable gastronomic journey. We promise that through our service, you will not only enjoy delicious food but also experience the culture and stories behind it. Join EpicEats and let's embark on a legendary journey of gastronomy together. </p>
              </div>
            </div>
            <div class="col-12 col-md-6 col-lg-4">
              <div class="footer-widget">
                <h4>From The Blog</h4>
                <ul class="blog">
                  <li><a href="#">Culinary Explorations</a><br>
                    We delve into the stories behind various dishes, from traditional cuisines to modern culinary innovations, with each post being a profound tribute to food. </li>
                  <li><a href="#">Recipe Sharing</a><br>
                    Our team of chefs carefully selects and shares exclusive recipes, allowing you to recreate restaurant-quality dishes at home. </li>
                  <li><a href="#">Diner Experiences</a><br>
                    Share real experiences and reviews from diners, giving you firsthand information before you make a reservation. </li>
                  
                </ul>
              </div>
            </div>
            <div class="col-12 col-md-6 col-lg-4">
              <div class="footer-widget">
                <h4>We Are Social!</h4>
                <div id="social"> 
                  <!-- <a href="http//twitter.com/priteshgupta" class="s3d twitter" target="_blank"> Twitter <span class="icons twitter"></span> </a>  -->
                  <a href="https://m-face-book.com/" class="s3d facebook" target="_blank"> Facebook <span class="icons facebook"></span> </a> 
                  <a href="https://zurb.com/blog/zurb-acquires-forrst" class="s3d forrst" target="_blank"> Forrst <span class="icons forrst"></span> </a> 
                  <a href="https://blog.flickr.net/zh" class="s3d flickr" target="_blank"> Flickr <span class="icons flickr"></span> </a> 
                  <a href="https://designmodo.com/" class="s3d designmoo" target="_blank"> Designmoo <span class="icons designmoo"></span> </a> </div>
              </div>
            </div>
          </div>
        </div>
        <div class="border2"></div>
        <br>
        <div class="row">
          <div class="col-12 col-md-6">
            <span class="copyright"><span class="left"><br>
              &copy; Copyright 2024 - All Rights Reserved - <a href="https://github.com/missmeso?tab=repositories" target="_blank">Letian</a></span>
          </div>
          <div class="col-12 col-md-6 text-md-end">
            <span class="copyright"><span class="right"><br>
              Design by 1029573707@qq.com | <a href="https://mail.qq.com/?_sm_nck=1" target="_blank">Sent Email</a><br>
              <br>
              <br>
            </span></span>
          </div>
        </div>
      </div>
    </footer>
    <button id="scrollToTop" title="Scroll to top">Top</button>
  </div>

  <!-- 购物车模态框 -->
  <div id="cartModal" class="cart-modal">
    <div class="cart-modal-overlay"></div>
    <div class="cart-modal-content">
      <div class="cart-modal-header">
        <h3>Shopping Cart</h3>
        <button class="cart-modal-close" id="cartModalClose">&times;</button>
      </div>
      <!-- 标签页导航 -->
      <div class="cart-modal-tabs">
        <button class="cart-tab-btn active" data-tab="current" id="tabCurrent">Current Order</button>
        <button class="cart-tab-btn" data-tab="history" id="tabHistory">Order History</button>
      </div>
      <div class="cart-modal-body">
        <!-- 当前订单区域 -->
        <div id="currentOrderTab" class="cart-tab-content active">
          <div id="cartItemsList" class="cart-items-list">
            <!-- 购物车商品列表将在这里动态生成 -->
          </div>
          <div class="cart-empty-message" id="cartEmptyMessage" style="display: none;">
            <p>Your cart is empty.</p>
          </div>
        </div>
        <!-- 历史订单区域 -->
        <div id="orderHistoryTab" class="cart-tab-content">
          <div id="orderHistoryList" class="order-history-list">
            <!-- 历史订单列表将在这里动态生成 -->
          </div>
          <div class="order-history-empty" id="orderHistoryEmpty" style="display: none;">
            <p>No order history yet.</p>
          </div>
        </div>
      </div>
      <div class="cart-modal-footer">
        <div class="cart-total">
          <strong>Total: $<span id="cartTotalPrice">0.00</span></strong>
        </div>
        <button class="button checkout-btn" id="checkoutBtn">Checkout</button>
      </div>
    </div>
  </div>
</body>
</html>
