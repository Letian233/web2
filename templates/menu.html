<!DOCTYPE html>
<html lang="en" data-menu-items='{{ menu_items|tojson|safe }}' data-current-user='{{ current_user|tojson|safe }}'>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Menu</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/bootstrap.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/hamberger.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/pages.css') }}">
    <script src="{{ url_for('static', filename='js/jQuery_v3.7.1.js') }}"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{{ url_for('static', filename='js/pages.js') }}"></script>
    <script src="{{ url_for('static', filename='js/hamberger.js') }}"></script>
    <script src="{{ url_for('static', filename='js/data.js') }}"></script>
    <script src="{{ url_for('static', filename='js/cart.js') }}"></script>
    <script src="{{ url_for('static', filename='js/menu.js') }}"></script>
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
</head>
<body class="menu-page">
    <!-- User menu - Fixed at top right corner -->
    <div id="userMenuContainer" class="user-menu-fixed"></div>
    <!-- Shopping cart button - Fixed at top right corner, below avatar (only shown for logged-in users) -->
    {% if current_user %}
    <div id="cartButtonContainer" class="cart-button-fixed">
      <button class="cart-fixed-btn" id="viewCartBtnFixed" title="View Cart" aria-label="View Cart">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="9" cy="21" r="1"></circle>
          <circle cx="20" cy="21" r="1"></circle>
          <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
        </svg>
        <span class="cart-badge-fixed" id="cartBadgeFixed" style="display: none;">0</span>
      </button>
    </div>
    {% endif %}
    <div id="container">
        <header>
          <nav class="navbar navbar-expand-lg navbar-dark">
            <div class="container-fluid">
              <button class="navbar-toggler hamburger" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span></span>
                <span></span>
                <span></span>
              </button>
              <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto" id="nav">
                  <li class="nav-item"><a class="nav-link" href="{{ url_for('index') }}">Home</a></li>
                  <li class="nav-item"><a class="nav-link" href="{{ url_for('about') }}">About</a></li>
                  <li class="nav-item"><a class="nav-link current" href="{{ url_for('menu') }}">Menu</a></li>
                  <li class="nav-item"><a class="nav-link" href="{{ url_for('reviews') }}">Review</a></li>
                </ul>
              </div>
            </div>
          </nav>
        </header>
    
    <div class="wrapper">
      <div class="container">
        <div class="border"></div>
        <div id="orderHistory"></div>
        
        <div class="row mt-4">
          <!-- Left menu area -->
          <div class="col-12 col-lg-8">
            <article class="menu">
              
             
              
              <!-- Search and filter area -->
              <div class="menu-filter-bar mb-4">
                <!-- Top: Search box + Hamburger button -->
                <div class="filter-header">
                <div class="search-input-wrapper">
                  <input 
                    type="text" 
                    id="searchInput" 
                    class="search-input" 
                      placeholder="Search dishes..."
                    aria-label="Search menu items"
                  >
                  <button type="button" id="searchBtn" class="search-button" aria-label="Search">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#f5f5f5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                      <circle cx="11" cy="11" r="8"></circle>
                      <path d="m21 21-4.35-4.35"></path>
                    </svg>
                  </button>
                  </div>
                  
                  <!-- Hamburger filter button -->
                  <button type="button" id="filterToggleBtn" class="filter-toggle-btn" aria-label="Toggle filters" aria-expanded="false">
                    <div class="filter-hamburger">
                      <span></span>
                      <span></span>
                      <span></span>
                    </div>
                    <span class="filter-toggle-text">Filters</span>
                  </button>
                </div>
                
                <!-- Collapsible filter panel -->
                <div id="filterPanel" class="filter-panel collapsed">
                  <div class="filter-panel-content">
                    <!-- Filter and sort controls -->
                    <div class="filter-row filter-controls">
                      <!-- Category filter -->
                      <div class="filter-group">
                        <label for="categoryFilter">Category:</label>
                        <select id="categoryFilter" class="filter-select">
                          <option value="">All Categories</option>
                          <!-- Options will be dynamically populated by JS -->
                        </select>
                      </div>
                      
                      <!-- Price range -->
                      <div class="filter-group price-range-group">
                        <label for="minPrice">Price:</label>
                        <div class="price-inputs">
                          <input 
                            type="number" 
                            id="minPrice" 
                            class="price-input" 
                            placeholder="Min" 
                            min="0" 
                            step="0.01"
                            aria-label="Minimum price"
                          >
                          <span class="price-separator">-</span>
                          <input 
                            type="number" 
                            id="maxPrice" 
                            class="price-input" 
                            placeholder="Max" 
                            min="0" 
                            step="0.01"
                            aria-label="Maximum price"
                          >
                        </div>
                      </div>
                      
                      <!-- Sort -->
                      <div class="filter-group">
                        <label for="sortBy">Sort by:</label>
                        <select id="sortBy" class="filter-select">
                          <option value="price-asc">Price: Low to High</option>
                          <option value="price-desc">Price: High to Low</option>
                          <option value="rating-desc">Rating: High to Low</option>
                          <option value="rating-asc">Rating: Low to High</option>
                        </select>
                      </div>
                      
                      <!-- Apply/Reset buttons -->
                      <div class="filter-buttons">
                        <button type="button" id="applyFiltersBtn" class="button filter-btn">Apply</button>
                        <button type="button" id="resetFiltersBtn" class="button filter-btn filter-btn-reset">Reset</button>
                      </div>
                    </div>
                  </div>
                </div>
                
                <!-- Current filter status display -->
                <div id="filterStatus" class="filter-status" style="display: none;">
                  <span id="filterStatusText"></span>
                  <button type="button" id="clearFiltersBtn" class="clear-filters-btn">Clear all</button>
                </div>
              </div>
              
              <!-- Menu items container -->
              <div id="menu-container">
                <!-- Menu items will be dynamically generated here -->
              </div>
              
              <!-- Pagination controls -->
              <div class="menu-pagination mt-4">
                <button id="prevBtn" class="pagination-btn">Previous</button>
                <span id="pageInfo" class="pagination-info">Page 1 of 3</span>
                <button id="nextBtn" class="pagination-btn">Next</button>
              </div>
            </article>
          </div>
          
          <!-- Right sidebar -->
          <div class="col-12 col-lg-4 mt-4 mt-lg-0">
            <aside class="sidebar">
              <div class="sidebar-header">
                <h3>Today's Specials</h3>
              </div>
              <ul class="blog">
                <li><a href="#">Seafood Pasta</a><br>
                  Fresh seafood with traditional pasta, served with a white wine cream sauce, $18</li>
                <li><a href="#">Mediterranean Salad</a><br>
                  A mix of green leaves, cherry tomatoes, olives, feta cheese, $12</li>
                <li><a href="#">Pan-Seared Salmon</a><br>
                  Premium Norwegian salmon with a side of lemon butter sauce and seasonal vegetables, $22</li>
                <li><a href="#">Mushroom Risotto</a><br>
                  A rich and creamy mushroom risotto infused with Parmesan cheese and fresh herbs, $16</li>
              </ul>
              <div class="border3"></div>
              <h3>Chef's Specialty</h3>
              {% if chef_specialties %}
                {% for sp in chef_specialties %}
                  <div class="chef-specialty-card mb-4">
                    {% if sp.image_url %}
                      <img 
                        src="{{ sp.image_url if sp.image_url.startswith('http') or sp.image_url.startswith('/') else url_for('static', filename=sp.image_url) }}" 
                        class="img-fluid mb-2 chef-specialty-image" 
                        alt="{{ sp.title }}"
                      >
                    {% endif %}
                    <p class="mb-1"><strong>{{ sp.title }}</strong></p>
                    <p class="mb-0">{{ sp.description }}</p>
                  </div>
                {% endfor %}
              {% else %}
                <p class="text-muted">Coming soon...</p>
              {% endif %}
              
              <!-- Delivery Info Widget -->
              <div class="border3 mt-4"></div>
              <div class="sidebar-widget">
                <h4>Free Delivery</h4>
                <div class="sidebar-widget-delivery">
                  <p>
                    Free delivery for orders over $50 within 5km radius!
                  </p>
                  <p>
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#9c5959" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                      <circle cx="12" cy="12" r="10"></circle>
                      <polyline points="12 6 12 12 16 14"></polyline>
                    </svg>
                    <span>Avg. time: 30-45 mins</span>
                  </p>
                </div>
              </div>
            </aside>
          </div>
        </div>
        
        <div class="border2 mt-4"></div>
      </div>
    </div>
      
    <footer>
      <div class="container">
        <div class="border"></div>
        <div class="wid">
          <div class="row g-4">
            <div class="col-12 col-md-6 col-lg-4">
              <div class="footer-widget">
                <h4>About Us</h4>
                <p>EpicEats is a food ordering platform dedicated to elevating the dining experience to new heights. We believe that every meal is not just a simple combination of food, but an adventure for the taste buds and a cultural exchange. Our mission is to connect diners with culinary creators, making every food order a memorable gastronomic journey. We promise that through our service, you will not only enjoy delicious food but also experience the culture and stories behind it. Join EpicEats and let's embark on a legendary journey of gastronomy together. </p>
              </div>
            </div>
            <div class="col-12 col-md-6 col-lg-4">
              <div class="footer-widget">
                <h4>From The Blog</h4>
                <ul class="blog">
                  <li><a class="disabled-link">Culinary Explorations</a><br>
                    We delve into the stories behind various dishes, from traditional cuisines to modern culinary innovations, with each post being a profound tribute to food. </li>
                  <li><a class="disabled-link">Recipe Sharing</a><br>
                    Our team of chefs carefully selects and shares exclusive recipes, allowing you to recreate restaurant-quality dishes at home. </li>
                  <li><a class="disabled-link">Diner Experiences</a><br>
                    Share real experiences and reviews from diners, giving you firsthand information before you make a reservation. </li>
                  
                </ul>
              </div>
            </div>
            <div class="col-12 col-md-6 col-lg-4">
              <div class="footer-widget">
                <h4>We Are Social!</h4>
                <div id="social"> 
                  <!-- <a href="http//twitter.com/priteshgupta" class="s3d twitter" target="_blank"> Twitter <span class="icons twitter"></span> </a>  -->
                  <a class="s3d facebook disabled-link"> Facebook <span class="icons facebook"></span> </a> 
                  <a class="s3d forrst disabled-link"> Forrst <span class="icons forrst"></span> </a> 
                  <a class="s3d flickr disabled-link"> Flickr <span class="icons flickr"></span> </a> 
                  <a class="s3d designmoo disabled-link"> Designmoo <span class="icons designmoo"></span> </a> </div>
              </div>
            </div>
          </div>
        </div>
        <div class="border2"></div>
        <br>
        <div class="row">
          <div class="col-12 col-md-6">
            <span class="copyright"><span class="left"><br>
              &copy; Copyright 2024 - All Rights Reserved - <a href="https://github.com/missmeso?tab=repositories" target="_blank">Letian</a></span>
          </div>
          <div class="col-12 col-md-6 text-md-end">
            <span class="copyright"><span class="right"><br>
              Design by 1029573707@qq.com | <a href="https://mail.qq.com/?_sm_nck=1" target="_blank">Sent Email</a><br>
              <br>
              <br>
            </span></span>
          </div>
        </div>
      </div>
    </footer>
  </div>

  <!-- Shopping cart modal -->
  <div id="cartModal" class="cart-modal">
    <div class="cart-modal-overlay"></div>
    <div class="cart-modal-content">
      <div class="cart-modal-header">
        <h3>Shopping Cart</h3>
        <button class="cart-modal-close" id="cartModalClose">&times;</button>
      </div>
      <!-- Tab navigation -->
      <div class="cart-modal-tabs">
        <button class="cart-tab-btn active" data-tab="current" id="tabCurrent">Current Order</button>
        <button class="cart-tab-btn" data-tab="history" id="tabHistory">Order History</button>
      </div>
      <div class="cart-modal-body">
        <!-- Current order area -->
        <div id="currentOrderTab" class="cart-tab-content active">
          <div id="cartItemsList" class="cart-items-list">
            <!-- Shopping cart items list will be dynamically generated here -->
          </div>
          <div class="cart-empty-message" id="cartEmptyMessage">
            <p>Your cart is empty.</p>
          </div>
        </div>
        <!-- Order history area -->
        <div id="orderHistoryTab" class="cart-tab-content">
          <div id="orderHistoryList" class="order-history-list">
            <!-- Order history list will be dynamically generated here -->
          </div>
          <div class="order-history-empty" id="orderHistoryEmpty">
            <p>No order history yet.</p>
          </div>
        </div>
      </div>
      <div class="cart-modal-footer">
        <div class="cart-total">
          <strong>Total: $<span id="cartTotalPrice">0.00</span></strong>
        </div>
        <button class="button checkout-btn" id="checkoutBtn">Checkout</button>
      </div>
    </div>
  </div>
</body>
</html>
